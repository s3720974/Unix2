#Build Configuration & Enviroment Variable (Change the values depending on your System)
defconfig="bcm2709_defconfig"
kernel="kernel7l"

sudo apt install raspberrypi-kernel-headers build-essential bc git wget bison flex libssl-dev make
git clone --depth=1 https://github.com/raspberrypi/linux



cd linux
make $defconfig

cd ..
mv .config linux

sudo tar -cvf backup.tar /boot/



cd linux
make -j4 zImage modules dtbs
sudo make modules_install
sudo cp arch/arm/boot/dts/*.dtb /boot/
sudo cp arch/arm/boot/dts/overlays/*.dtb* /boot/overlays/
sudo cp arch/arm/boot/dts/overlays/README /boot/overlays/
sudo cp arch/arm/boot/zImage /boot/unikernel.img


sudo sed -i -e '1ikernel=unikernel.img\' /boot/config.txt